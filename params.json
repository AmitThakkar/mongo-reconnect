{
  "name": "Mongo Reconnect",
  "tagline": "This is a demo repository which shows how to reconnect with MongoDB Server with NodeJS.",
  "body": "# MongoDB Reconnect\r\n\r\nThis is a demo repository which shows how to reconnect with MongoDB Server with NodeJS.\r\n\r\n**MongooseJS** has awesome `event handling`. With the help of `disconnect` event, we will get know that connection has \r\nbroken with **MongoDB Server** so we can try to reconnect with **MongoDB**. Below is the sample/demo app, which will try\r\nto reconnect with(Here we capture **MongoDB** `disconnect` event and try to reconnect with) **MongoDB**. And as soon as\r\nMongoDB Server will up again, it will automatically connect to **MongoDB** without restarting the **NodeJS** Server.\r\n\r\n```JavaScript\r\n/**\r\n * Created by Amit Thakkar on 9/21/15.\r\n */\r\n(function (require) {\r\n    'use strict';\r\n    var mongoose = require('mongoose');\r\n    var mongoURL = 'mongodb://localhost/test';\r\n    var db;\r\n    var reconnectTimeout = 5000;\r\n    var connectWithRetry = function(cb) {\r\n        mongoose.connect(mongoURL, function(error) {\r\n            if (error) {\r\n                db.close();\r\n                console.error('Failed to connect to MongoDB on startup', error);\r\n            } else {\r\n                console.info('Connected with MongoDB Server');\r\n            }\r\n        });\r\n        db = mongoose.connection;\r\n        cb && cb();\r\n    };\r\n    connectWithRetry(function() {\r\n        db.on('error', function (error) {\r\n            console.error('Mongoose Error: ', error);\r\n        });\r\n        db.on('connected', function () {\r\n            console.info('Mongoose Connected to ', mongoURL);\r\n        });\r\n        db.once('open', function () {\r\n            console.info('Mongoose Connection Open with MongoDB Server on ', mongoURL);\r\n        });\r\n        db.on('disconnected', function () {\r\n            console.info('Mongoose connection disconnected');\r\n            setTimeout(connectWithRetry, reconnectTimeout);\r\n        });\r\n    });\r\n})(require);\r\n```\r\n\r\n> Reconnect interval is 5sec here.\r\n\r\nFollow Me\r\n---\r\n[Github](https://github.com/AmitThakkar)\r\n\r\n[Twitter](https://twitter.com/amit_thakkar01)\r\n\r\n[LinkedIn](https://in.linkedin.com/in/amitthakkar01)\r\n\r\n[More Blogs By Me](http://amitthakkar.github.io/)",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}